<!--
 * @Author: 黄遥
 * @Date: 2020-05-28 09:23:01
 * @LastEditors: 黄遥
 * @LastEditTime: 2020-07-13 21:43:18
 * @Description: file content
--> 
1. 输入URL，网络进程查找本地缓存是否缓存了该资源，是的话直接返回缓存，不是的话进入 DNS 解析
2. DNS 解析出服务器 IP 和 端口，如果请求协议是 HTTPS，还需要建立 TLS 连接
3. IP 地址和 TCP 建立连接，连接建立后，浏览器端会构建请求行、请求头等信息，并把和该域名相关的 Cookie 等数据附加到请求头中，然后向服务器发送构建的请求信息
4. 数据在进入服务端之前，可能还会先经过负责负载均衡的服务器，它的作用就是将请求合理的分发到多台服务器上
5. 判断响应状态码，如果是 200 那就继续解析，如果是 400 或 500 的话就会报错，如果是 300 的话会进行重定向，这里会有个重定向计数器，避免过多次的重定向，超过次数也会报错
> 响应码是 301、302，则根据响应头中 location 的地址重定向到对应的地址
> 如果是 200，则可以继续往下处理该请求
> 响应数据类型处理：Content-Type 来决定如何显示响应体的内容，包括 text/html、application/json、application/octet-stream
6. 默认情况下，Chrome 会为每个页面分配一个渲染进程，也就是说，每打开一个页面就会配套创建一个新的渲染进程
7. 文件解码成功后会正式开始渲染流程，会先根据 HTML 构建 DOM 树，有 CSS 的话会构建 CSSOM 树。如果遇到 script 标签的话，看有没有 async 和 defer，前者会并行下载并执行 JS，下载完毕立即解释指向，后者会先下载 JS，等 HTML 解析完成，顺序执行 JS，如果都没有的话，就会阻塞渲染进程，直到 JS 执行完.
CSSOM 树和 DOM 树构建完成后会开始生成 Render 树，这一步就是确定页面元素的布局、样式等等
在生成 Render 树的过程中，GPU 开始绘制，合并图层

## 浏览器渲染步骤
1. 处理 HTML 标记并构建 DOM 树
2. 处理 CSS 标记并构建 CSSOM 树
3. 将 DOM 与 CSSOM 合并成一个渲染树
4. 根据渲染树来布局，计算每个节点的布局信息
5. 将各个节点绘制到屏幕上

## 构建对象模型（DOM、CSSOM）
浏览器解析 HTML 文档时，会完成以下步骤：
1. 读取 HTML 的原始节点，根据文件制定编码（例：utf-8）解析为各个字符
2. 将字符串转化为各种标签
3. 将标签转化为 node 节点
4. DOM 构建
浏览器解析HTML时，遇到link标签，会发出请求并返回资源，开始解析CSS
CSS字节转换为字符，接着转换成令牌（tokens）和节点，最后构建生成CSSOM
CSSOM和DOM是独立的数据结构

## 渲染树构建、布局及绘制
CSSOM树和DOM树合并成渲染树，然后用于计算每个可见元素的布局，并输出给绘制流程，将像素渲染到屏幕上。
构建渲染树的步骤：
1. 从 DOM 树的根节点开始遍历每个可见节点（display：none与visibility：hidden的区别）
2. 对于每个可见节点，为其找到适配的 CSSOM 规则并应用它
3. 生成渲染树
布局阶段：输出盒模型
绘制：输出到屏幕上的像素

https://www.jianshu.com/p/b7b7a5904223